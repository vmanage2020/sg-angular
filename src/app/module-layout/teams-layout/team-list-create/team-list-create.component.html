<!-- <app-ui-preloader [display]="loading" *ngIf="displayLoader"></app-ui-preloader> -->
<div class="row">
        <div class="col-lg-12">
            <div class="card-box">
                <h5 class="text-uppercase bg-light p-2 mt-0 mb-3">Team Details</h5>
                
                <form [formGroup]="createteamForm" (ngSubmit)="submitForm()" class="col-12 p-0">


                    
                        <div class="row">
                            <div class="col-3 mt-2 label-border-height ">
                                <label class="for-label-req" for="first_name">Sport</label>
                            </div>
                            <div class="col-4 mt-2" id="customHeight">
                                <ng-select 
                                [items]="SportsList" 
                                formControlName="sport_id" 
                                bindLabel="name"
                                bindValue="sport_id"
                                [loading]="sportSelect"
                                (focus)="selectedSport($event,createteamForm)"
                                [clearable]="false" 
                                (change)="selectedSport($event,createteamForm)"
                                 placeholder="Select sport">
                                </ng-select>
                                <div class="input-error-msg text-danger" *ngIf="sportValid">
                                    Select Sport.
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-3 mt-2 label-border-height ">
                                <label class="for-label-req" for="first_name">Season</label>
                            </div>
                            <div class="col-4 mt-2" id="customHeight">
                                <ng-select 
                                [items]="seasonList" 
                                formControlName="season_id" 
                                bindLabel="season_name" 
                                bindValue="season_id"
                                [loading]="seasonSelect"
                                (focus)="selectedSeason($event,createteamForm)" 
                                [clearable]="false"
                                (change)="selectedSeason($event,createteamForm)"
                                placeholder="Select season">
                                </ng-select>
                                <div class="input-error-msg text-danger" *ngIf="seasonValid">
                                    Select Season.
                                </div>
                            </div>
                        </div> 

                        <div class="row">
                                <div class="col-3 mt-2 label-border-height ">
                                    <label class="for-label-req" for="first_name">Level</label>
                                </div>
                                <div class="col-4 mt-2" id="customHeight">
                                    <ng-select 
                                    [items]="levelList" 
                                    formControlName="level_id" 
                                    bindLabel="level_name" 
                                    bindValue="level_id" 
                                    [loading]="levelSelect"
                                    [clearable]="false" 
                                    (change)="selectedLevel($event,createteamForm)"                                    
                                    placeholder="Select level">
                                    </ng-select>
                                    <div *ngIf="f.level_id.errors?.required && submitted" class="input-error-msg text-danger">
                                        Select Level.
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-3 mt-2 label-border-height ">
                                    <label class="for-label-req" for="first_name">Team Name</label>
                                </div>
                                <div class="col-4 mt-2" id="customHeight">
                                    <input type="text" 
                                    formControlName="team_name" 
                                    class="form-control"
                                    name="team_name"
                                    id="team_name" 
                                    placeholder="Enter team name" />
                                    <div *ngIf="submitted && f.team_name.errors" class="invalid-feedback">
                                        <div *ngIf="f.team_name.errors.required">Team Name is required.</div>
                                        <div *ngIf="f.team_name.errors?.pattern">Only text characters are allowed.</div>
                                    </div>
                                </div>
                            </div>
                          
                    
                    <div class="row" id="multiplayerbox" > <!-- *ngIf="teamplayerList.length>0" -->
                        <div class="col-3 mt-2 label-border-height allColMaxWidth" style="height: 170px !important;">
                            <label class="for-label-req" for="first_name">Player Selection</label>
                        </div>
                        <div class="col-4 mt-2" id="">
                              <div class="multi-select-label" style="width: 465px;height: 22px;">
                                <div style="float: left;">Available</div>  
                                <div style="float:right;">Selected</div>
                              </div>

                                

                              <select multiple="multiple" class="multi-select" id="player_select"
                                name="player_select" data-plugin="multiselect"
                                (change)="onPlayerChange($event,createTeamForm)" [ngClass]="{ 'is-invalid': submitted && f.player_select.errors }">
                                 <option [value]="player.id" *ngFor="let player of teamplayerList;let i = index">{{player.name}}</option> 
                              </select>


                              <div *ngIf="submitted && f.player_select.errors" class="invalid-feedback">
                                    <div *ngIf="f.player_select.errors.required">Player is required.</div>
                                </div>
                        </div>                                
                  </div>


                    <div class="col-lg-12 row" *ngIf="teamplayerList.length>0">
                        <div class="form-group mb-3 col-lg-6">
                            <label for="sports">Players <span class="text-danger">*</span></label>
        
                            <ng-select [items]="teamplayerList"
                            id="player_select" name="player_select" formControlName="player_select"
                            bindLabel="name"
                            bindValue="id"
                            [multiple]="true"
                            placeholder="Select Players"
                            (change)="OnPlayerChange($event,createteamForm)"
                            >
                            </ng-select>
                        </div>
                    </div>

                   
                    <div class="col-lg-12 row" *ngIf="createteamForm?.value.player_select != null ">
                        <div class="col-lg-12">
                          <div class="col-12 mt-2 heading" style="background-color: #f1f5f7 !important;margin: -5px 0px 0px 0px !important;">
                            <h4 style="background-color: #f1f5f7 !important;padding: 10px 0px;margin: 0px;">Select Players</h4>
                          </div>
                        </div>
                      </div>
                        <div class="col-lg-12 row" style="padding-bottom: 20px;padding-left: 25px;" *ngIf="createteamForm?.value.player_select != null">
                          <div class="col-12 mt-2 mb-0 pl-0">
                            <div formArrayName="player" style="overflow-x: scroll;">
                              <table id="basic-datatable" style="display: table;"
                              class="table table-responsive datatables dt-responsive nowrap mb-0">
                                <thead class="border">
                                  <tr>
                                    <th class="border" style="width: 200px;">Name</th>
                                    <th class="border" style="width: 200px;">Position(s)</th>
                                     <th class="border" style="width: 200px;">Shoots</th>
                                    <th class="border" style="width: 200px;">Height</th>
                                    <th class="border" style="width: 200px;">Weight</th>
                                    <th class="border" style="width: 200px;" *ngFor="let playerMetaDataItem of playerMetaList; index as i;">
                                        {{playerMetaDataItem.Name}}
                                     </th>
                                  </tr>
                                </thead>
                                    <tbody>
                                    
                                    <tr class="border"
                                    *ngFor="let player of playerArr.controls; let i = index" [formGroupName]="i">
                                        <td>
                                            <ng-select appendTo="body" 
                                            [items]="playerList" 
                                            bindLabel="name"                                          
                                            [clearable]="false" 
                                            formControlName="first_name"
                                            [clearSearchOnAdd]="true"
                                            (change)="selectedPlayer($event,createteamForm,i)"
                                            bindValue="first_name" placeholder="Select name">
                                        </ng-select>
                                        </td>
                                        <td>
                                            <ng-select appendTo="body" 
                                            [items]="positionList" 
                                            bindLabel="name"
                                            [clearable]="false" 
                                            [multiple]="true"
                                            [clearSearchOnAdd]="true" 
                                            (change)="selectedPosition($event,createteamForm,i)"
                                            bindValue="position_id" placeholder="Select position">
                                            </ng-select>
                                        </td>
                                        <td>
                                            <ng-select appendTo="body" 
                                            [items]="shootList" 
                                            bindLabel="name"
                                            formControlName="shoot" 
                                            [clearable]="false" 
                                            bindValue="name"
                                            placeholder="Select shoots">
                                        </ng-select>
                                        </td>
                                        <td>
                                            <div class="d-flex p-0" formGroupName="height">
                                                <div >
                                                    <input type="text" class="form-control"
                                                    formControlName="height_main_uom" />                                            
                                                </div>
                                                <div>
                                                    <ng-select appendTo="body" 
                                                        [items]="height" 
                                                        bindLabel="value" 
                                                        class="px-1" 
                                                        (change)=heightValidation($event,createteamForm,i)
                                                        formControlName="height_main_unit" 
                                                        [clearable]="false"
                                                        bindValue="value">
                                                    </ng-select>
                                                
                                                </div>

                                                <div >
                                                    <input type="text" class="form-control"
                                                    formControlName="height_sub_uom" />
                                                </div>

                                                <ng-select appendTo="body" 
                                                [items]="height" 
                                                bindLabel="name"
                                                class="px-1" 
                                                (change)=heightValidation($event,createteamForm,i)
                                                formControlName="height_sub_unit" [clearable]="false"
                                                bindValue="name">
                                                </ng-select>
                                                    
                                            </div>       

                                        </td>
                                        <td formGroupName="weight">

                                            <div class="d-flex p-0">
                                                <div id="form">
                                                     <input type="text" class="form-control"
                                                     formControlName="weight_main_uom" />
                                                    

                                                </div>
                                                <div>
                                                     <ng-select appendTo="body" 
                                                     [items]="height" 
                                                     bindLabel="weight" 
                                                     class="px-1"
                                                     formControlName="weight_main_unit" [clearable]="false"
                                                     bindValue="weight">
                                                 </ng-select>
                                                 
                                                </div>
                                              </div>
                                        </td>

                                        
                                        <ng-container *ngIf="playerMetaList.length>0">
                                            <td class="border p-1" *ngFor="let playerMetaDataItem of playerMetaList; index as i;">
                                                
                                                <div *ngIf="playerMetaDataItem.Type === 'Drop Down'">

                                                            <ng-select appendTo="body" 
                                                            [items]="playerMetaDataItem.Value"
                                                            id="playerMetaDataItem.Key"
                                                            name="playerMetaDataItem.Key"
                                                            placeholder="Select Item">
                                                            </ng-select>

                                                </div>
                                                <div *ngIf="playerMetaDataItem.Type === 'Radio button'">

                                                    <label style="width: 150px;"  *ngFor="let itemvalue of playerMetaDataItem.Value; let i = index" for="i">
                                                        <input type="radio" 
                                                        
                                                        id="playerMetaDataItem.Key"
                                                        name="playerMetaDataItem.Key"
                                                        value="itemvalue" >
                                                        {{itemvalue}}
                                                    </label> 

                                                </div>
                                                <div *ngIf="playerMetaDataItem.Type === 'Check box'">

                                                        <label style="width: 150px;"  *ngFor="let itemvalue of playerMetaDataItem.Value; let i = index">
                                                            <input type="checkbox" 
                                                            
                                                            id="playerMetaDataItem.Key"
                                                            name="playerMetaDataItem.Key"
                                                            value="itemvalue" >
                                                            {{itemvalue}}
                                                        </label>

                                                </div>
                                                <div *ngIf="playerMetaDataItem.Type === 'Text Field'">

                                                            <input type="text"
                                                            
                                                            id="playerMetaDataItem.Key"
                                                            name="playerMetaDataItem.Key"
                                                            placeholder="Enter Value" />

                                                </div>

                                             </td>
                                        </ng-container>
                                        
                                    </tr>
                                    </tbody>
                                  </table>
                                </div>
                            </div>
                        </div>

                        <div class="row" id="multicoachbox"> <!-- *ngIf="teamcoachList.length>0" -->
                            <div class="col-3 mt-2 label-border-height allColMaxWidth" style="height: 170px !important;">
                                <label class="for-label-req" for="first_name">Coach Selection</label>
                            </div>
                            <div class="col-4 mt-2" id="">
                                <div class="multi-select-label" style="width: 465px;height: 22px;">
                                    <div style="float: left;">Available</div>  
                                    <div style="float:right;">Selected</div>
                                  </div>

                                <select multiple="multiple" class="multi-select" id="coach_select"
                                name="coach_select" data-plugin="multiselect" 
                                (change)="onCoachChange($event,createTeamForm)" [ngClass]="{ 'is-invalid': submitted && f.coach_select.errors }">
                                 <option [value]="player.id" *ngFor="let player of teamcoachList;let i = index">{{player.name}}</option> 
                                </select>

                                     <div *ngIf="submitted && f.coach_select.errors" class="invalid-feedback">
                                        <div *ngIf="f.coach_select.errors.required">Coach is required.</div>
                                    </div>
                            </div>                                
                      </div>

                        <div class="col-lg-12 row" *ngIf="teamcoachList.length>0">
                            <div class="form-group mb-3 col-lg-6">
                                <label for="sports">Coach <span class="text-danger">*</span></label>
            
                                <ng-select [items]="teamcoachList"
                                id="coach_select" name="coach_select" formControlName="coach_select"
                                bindLabel="name"
                                bindValue="id"
                                [multiple]="true"
                                placeholder="Select Coach"
                                (change)="OnCoachChange($event,createteamForm)"
                               >
                                </ng-select>
                                
                            </div>
                        </div>

                       <div class="col-lg-12 row" *ngIf="createteamForm?.value.coach_select != null ">
                        <div class="col-lg-12">
                          <div class="col-12 mt-2 heading" style="background-color: #f1f5f7 !important;margin: -5px 0px 0px 0px !important;">
                            <h4 style="background-color: #f1f5f7 !important;padding: 10px 0px;margin: 0px;">Select Coach</h4>
                          </div>
                        </div>
                      </div>
                        <div class="col-lg-12 row" style="padding-bottom: 20px;padding-left: 25px;" *ngIf="createteamForm?.value.coach_select != null">
                          <div class="col-12 mt-2 mb-0 pl-0">
                            <div formArrayName="coach" style="overflow: scroll;">
                              <table id="basic-datatable" style="display: table;"
                              class="table table-responsive datatables dt-responsive nowrap mb-0">
                                <thead class="coach">
                                  <tr>
                                    <th class="border" style="width: 200px;" >Name</th>
                                    <th class="border" style="width: 100px;" >Title</th>
                                    <th style="width: 150px;" *ngFor="let coachMetaDataItem of coachMetaList; index as i;">
                                        {{coachMetaDataItem.Name}}
                                     </th>
                                  </tr>
                                </thead>
                                    <tbody>
                                    
                                    <tr class="border"
                                    *ngFor="let coach of coachArr.controls; let j = index" [formGroupName]="j">
                                        <td>
                                            <ng-select appendTo="body" 
                                                [items]="coachList" bindLabel="name"
                                                [clearable]="false" 
                                                formControlName="first_name"
                                                [clearSearchOnAdd]="true"
                                                bindValue="first_name" placeholder="Select Name">
                                            </ng-select>
                                        </td>
                                        <td>
                                            <input type="text" formControlName="title"
                                            class="form-control"
                                            
                                            name="team_name" id="team_name"
                                            placeholder="Enter title " />
                                        </td>
                                        
                                        <ng-container *ngIf="coachMetaList.length>0">
                                            <td class="border p-1" *ngFor="let coachMetaDataItem of coachMetaList; index as i;">

                                                <div *ngIf="coachMetaDataItem.Type === 'Drop Down'">

                                                            <ng-select appendTo="body" 
                                                            [items]="coachMetaDataItem.Value"
                                                            
                                                            id="coachMetaDataItem.Key"
                                                            name="coachMetaDataItem.Key"
                                                            placeholder="Select Item">
                                                            </ng-select>

                                                </div>
                                                <div *ngIf="coachMetaDataItem.Type === 'Radio button'">

                                                    <label style="width: 150px;" formArrayName="orders" *ngFor="let itemvalue of coachMetaDataItem.Value; let i = index">
                                                        <input type="radio" 
                                                        
                                                        id="coachMetaDataItem.Key"
                                                        name="coachMetaDataItem.Key"
                                                        value="itemvalue" >
                                                        {{itemvalue}}
                                                    </label> 

                                                </div>
                                                <div *ngIf="coachMetaDataItem.Type === 'Check box'">

                                                        <label style="width: 150px;" formArrayName="orders" *ngFor="let itemvalue of coachMetaDataItem.Value; let i = index">
                                                            <input type="checkbox" 
                                                           
                                                            id="coachMetaDataItem.Key"
                                                            name="coachMetaDataItem.Key"
                                                            value="itemvalue" >
                                                            {{itemvalue}}
                                                        </label>

                                                </div>
                                                <div *ngIf="coachMetaDataItem.Type === 'Text Field'">

                                                            <input type="text"
                                                            
                                                            id="coachMetaDataItem.Key"
                                                            name="coachMetaDataItem.Key"
                                                            placeholder="Enter Value" />

                                                </div>

                                             </td>
                                        </ng-container>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                          </div>
                        </div>

                        <div class="row" id="multimanagerbox"> <!-- *ngIf="teammanagerList.length>0" -->
                            <div class="col-3 mt-2 label-border-height allColMaxWidth" style="height: 170px !important;">
                                <label class="for-label-req" for="first_name">Manager Selection</label>
                            </div>
                            <div class="col-4 mt-2" id="">
                                <div class="multi-select-label" style="width: 465px;height: 22px;">
                                    <div style="float: left;">Available</div>  
                                    <div style="float:right;">Selected</div>
                                  </div>

                                <select multiple="multiple" class="multi-select" id="manager_select"
                                name="manager_select" data-plugin="multiselect" (change)="onManagerChange($event,createTeamForm)">
                                    <option [value]="player.id" *ngFor="let player of teammanagerList;let i = index">{{player.name}}</option> 
                                </select>

                                    <div *ngIf="submitted && f.manager_select.errors" class="invalid-feedback">
                                        <div *ngIf="f.manager_select.errors.required">Manager is required.</div>
                                    </div>
                            </div>                                
                      </div>

                        <div class="col-lg-12 row" *ngIf="teammanagerList.length>0">
                            <div class="form-group mb-3 col-lg-6">
                                <label for="sports">Manager <span class="text-danger">*</span></label>
            
                                <ng-select [items]="teammanagerList"
                                id="manager_select" name="manager_select" formControlName="manager_select"
                                bindLabel="name"
                                bindValue="id"
                                [multiple]="true"
                                placeholder="Select Manager"
                                (change)="OnManagerChange($event,createteamForm)"
                                >
                                </ng-select>
                            </div>
                        </div>


                        <div class="col-lg-12 row" *ngIf="createteamForm?.value.manager_select != null ">
                            <div class="col-lg-12">
                              <div class="col-12 mt-2 heading" style="background-color: #f1f5f7 !important;margin: -5px 0px 0px 0px !important;">
                                <h4 style="background-color: #f1f5f7 !important;padding: 10px 0px;margin: 0px;">Select Manager</h4>
                              </div>
                            </div>
                          </div>
                            <div class="col-lg-12 row" style="padding-bottom: 20px;padding-left: 25px;" *ngIf="createteamForm?.value.manager_select != null">
                              <div class="col-12 mt-2 mb-0 pl-0">
                                <div formArrayName="manager" style="overflow: scroll;">
                                  <table id="basic-datatable" style="display: table;"
                                  class="table table-responsive datatables dt-responsive nowrap mb-0">
                                    <thead class="manager">
                                      <tr>
                                        <th class="border" style="width: 200px;" >Name</th>
                                        <th class="border" style="width: 150px;" *ngFor="let managerMetaDataItem of managerMetaList; index as i;">
                                            {{managerMetaDataItem.Name}}
                                         </th>
                                      </tr>
                                    </thead>
                                        <tbody>
                                        
                                        <tr class="border"
                                        *ngFor="let manager of managerArr.controls; let k = index" [formGroupName]="k">
                                            <td>
                                                <ng-select appendTo="body" 
                                                [items]="managerList" bindLabel="name"
                                                    [clearable]="false" 
                                                    formControlName="first_name"
                                                    [clearSearchOnAdd]="true"
                                                   bindValue="first_name" placeholder="Select Name">
                                                </ng-select>
                                            </td>
                                            <ng-container *ngIf="managerMetaList.length>0">
                                                <td class="border p-1" *ngFor="let managerMetaDataItem of managerMetaList; index as i;">

                                                    <div *ngIf="managerMetaDataItem.Type === 'Drop Down'">

                                                                <ng-select appendTo="body" 
                                                                [items]="managerMetaDataItem.Value"
                                                                
                                                                id="managerMetaDataItem.Key"
                                                                name="managerMetaDataItem.Key"
                                                                placeholder="Select Item">
                                                                </ng-select>

                                                    </div>
                                                    <div *ngIf="managerMetaDataItem.Type === 'Radio button'">

                                                        <label style="width: 150px;" formArrayName="orders" *ngFor="let itemvalue of managerMetaDataItem.Value; let i = index">
                                                            <input type="radio" 
                                                            
                                                            id="managerMetaDataItem.Key"
                                                            name="managerMetaDataItem.Key"
                                                            value="itemvalue" >
                                                            {{itemvalue}}
                                                        </label> 

                                                    </div>
                                                    <div *ngIf="managerMetaDataItem.Type === 'Check box'">

                                                            <label style="width: 150px;" formArrayName="orders" *ngFor="let itemvalue of managerMetaDataItem.Value; let i = index">
                                                                <input type="checkbox" 
                                                               
                                                                id="managerMetaDataItem.Key"
                                                                name="managerMetaDataItem.Key"
                                                                value="itemvalue" >
                                                                {{itemvalue}}
                                                            </label>

                                                    </div>
                                                    <div *ngIf="managerMetaDataItem.Type === 'Text Field'">

                                                                <input type="text"
                                                                
                                                                id="managerMetaDataItem.Key"
                                                                name="managerMetaDataItem.Key"
                                                                placeholder="Enter Value" />

                                                    </div>

                                                 </td>
                                            </ng-container>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                              </div>
                            </div>



                            <div class="row mt-3">
                                <button type="submit" class="btn btn-dark waves-effect waves-light">Save</button>&nbsp;&nbsp;&nbsp;
                                &nbsp;&nbsp;&nbsp;
                                <button type="button" class="btn btn-dark waves-effect waves-light m-l-10"
                                    (click)="goBack()">Cancel</button>
                            </div>

                    <!--teamplayerListss - {{ teamplayerList | json}}

                    teamcoachListss - {{ teamcoachList | json}}

                    teammanagerListss - {{ teammanagerList | json}}-->

                    <!-- <div style="float:left">
 
                        <iui-listbox #listbox [items]="items" [selectionMode]="selMode" (selectionChanged)="onSelectionChanged($event)">
                            <iui-listitem *ngFor="let item of items" [allowAnimation]="true">  
                                <div class="item-label">{{item.text}}</div>
                            </iui-listitem>
                        </iui-listbox>
                      </div>
                      <div style="float:left;margin-left:30px;">
                        <div style="margin-top:35px;padding:10px 0 5px 0;">Selected Items:</div>
                        <iui-listbox [items]="selItems">
                            <iui-listitem *ngFor="let item of selItems">  
                                <div class="item-label">{{item.text}}</div>
                            </iui-listitem>
                        </iui-listbox>
                      </div> -->
                    

                </form>    
            </div> <!-- end card-box -->
        </div> <!-- end col -->
 
    </div>
    <!-- end row -->